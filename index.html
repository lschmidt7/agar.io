<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <title>Agar.io</title>
    </head>
    <body onmousemove="game.setMousePos(event)">
        <div id="header">
            <div class="card text-center content">
                <h5 class="card-header">Settings</h5>
                <div class="card-body">
                    <input type="checkbox" onclick="helper.changeDraw('grid')"/> <label>Grid</label>
                    <br>
                    <input type="checkbox" onclick="helper.changeDraw('cell')"/> <label>Cell</label>
                    <br>
                    <input type="checkbox" onclick="helper.changeDraw('dir')"/> <label>Dir</label>
                    <br>
                    <input type="checkbox" onclick="helper.changeDraw('bounds')"/> <label>Bounds</label>
                </div>
            </div>
            <div style="flex: 9;">

            </div>
            <div class="card content text-center">
                <h5 class="card-header">Info</h5>
                <div class="card-body">
                    <p id="score"><b>Score:</b> </p>
                    <p id="size"><b>Size:</b> </p>
                    <p id="vel"><b>Velocity:</b> </p>
                </div>
            </div>
        </div>
        <canvas id="canvas" >
            
        </canvas>
    </body>
    <script src="js/States.js"></script>
    <script src="js/Vec2.js"></script>
    <script src="js/Dot.js"></script>
    <script src="js/Game.js"></script>
    <script src="js/Player.js" ></script>
    <script src="js/EventHandler.js"></script>
    <script src="js/Helper.js"></script>

    <script>
        var game = new Game('canvas', new Vec2(100,100),UpdateGame,10);
        var eventHandler = new EventHandler();
        var player = new Player(game.ctx);
        var helper = new Helper(game,player);

        eventHandler.init();
        eventHandler.addKeyPress(' ',game.changeState);

        game.init(500);
    
        function UpdateGame() {
            game.clear();
            game.render();

            helper.draw();
            
            player.draw(game.ctx);
            player.move(game.mousePos);
    
            let playerCell = game.indexCell(player.pos);

            game.update(playerCell.x,playerCell.y,player); 
        }
    
    </script>

</html>